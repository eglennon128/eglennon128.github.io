(()=>{var W={drone:"content/portfolio-drone.json",gis:"content/portfolio-gis.json"};function Y(c){let u=document.createElement("article");u.className="group portfolio-card",u.dataset.type=c.type||"misc",u.dataset.itemId=c.id||"";let A=document.createElement("div");A.className="card-media";let m=document.createElement("img");m.src=c.image,m.alt=c.alt||"",m.loading="lazy",m.decoding="async",A.appendChild(m);let x=document.createElement("div");x.className="card-body";let v=document.createElement("h3");v.className="card-title",v.textContent=c.title;let k=document.createElement("p");if(k.className="card-desc",k.textContent=c.description||"",x.appendChild(v),x.appendChild(k),c.cta&&c.cta.href&&c.cta.label){let L=document.createElement("a");L.className="inline-flex items-center gap-1 text-blue-700 hover:text-blue-800 link-underline mt-4",L.href=c.cta.href,L.textContent=c.cta.label;let p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.setAttribute("stroke","currentColor"),p.setAttribute("stroke-width","2"),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.classList.add("h-5","w-5","transition-transform","group-hover:translate-x-0.5");let B=document.createElementNS("http://www.w3.org/2000/svg","path");B.setAttribute("d","M9 18l6-6-6-6"),p.appendChild(B),L.appendChild(p),x.appendChild(L)}return u.appendChild(A),u.appendChild(x),u}async function T(c,u){let A=document.querySelector(c);if(!A)return;let m=A.querySelector("[data-dynamic-list]");if(!m&&A.matches("[data-dynamic-list]")&&(m=A),!!m)try{let x=await fetch(W[u]);if(!x.ok)throw new Error(`Failed to load ${u} data`);let v=await x.json(),k=new Set(Array.from(m.querySelectorAll("[data-item-id]")).map(L=>L.dataset.itemId));v.forEach(L=>{if(k.has(L.id))return;let p=Y(L);p.dataset.stacked="dynamic",m.appendChild(p)})}catch(x){console.warn("Portfolio data failed to load",x);let v=document.createElement("div");v.className="mt-4 text-sm text-red-600",v.textContent="Additional projects will appear here once the site is fully loaded. Please try again later.",m.appendChild(v)}}function R(){T("#drone-portfolio-grid","drone"),T("#gis-portfolio-grid","gis")}(function(){"use strict";let c=document.getElementById("menuButton"),u=document.getElementById("mobileMenu"),A=document.querySelector("#menuButton .icon-burger"),m=document.querySelector("#menuButton .icon-close");function x(){u.hidden=!1,requestAnimationFrame(()=>{u.classList.add("open")}),c.setAttribute("aria-expanded","true"),A&&m&&(A.classList.add("hidden"),m.classList.remove("hidden"))}function v(){u.classList.remove("open");let t=n=>{n.propertyName==="max-height"&&(u.hidden=!0,u.removeEventListener("transitionend",t))};u.addEventListener("transitionend",t),c.setAttribute("aria-expanded","false"),A&&m&&(A.classList.remove("hidden"),m.classList.add("hidden"))}function k(){c.getAttribute("aria-expanded")==="true"?v():x()}c&&u&&(c.addEventListener("click",k),document.addEventListener("keydown",t=>{t.key==="Escape"&&c.getAttribute("aria-expanded")==="true"&&v()}),document.addEventListener("click",t=>{if(!(c.getAttribute("aria-expanded")==="true"))return;let i=t.target;c.contains(i)||u.contains(i)||v()}),u.querySelectorAll("a").forEach(t=>{t.addEventListener("click",()=>{c.getAttribute("aria-expanded")==="true"&&v()})}));let L=document.getElementById("year");L&&(L.textContent=new Date().getFullYear());let p=Array.from(document.querySelectorAll(".reveal"));if((function(){let n=new Set;p.forEach(i=>{i.parentElement&&n.add(i.parentElement)}),n.forEach(i=>{let o=i.getAttribute&&i.getAttribute("data-stagger-step"),l=i.getAttribute&&i.getAttribute("data-stagger-base"),f=parseInt(o||"80",10),g=parseInt(l||"0",10);Array.from(i.querySelectorAll(":scope > .reveal, :scope > * .reveal")).filter(Boolean).forEach((s,h)=>{s.style.transitionDelay||(s.style.transitionDelay=`${g+h*f}ms`),s.classList.add("will-fade")})})})(),"IntersectionObserver"in window&&p.length){let t=new IntersectionObserver((n,i)=>{n.forEach(o=>{o.isIntersecting&&(o.target.classList.add("in-view"),i.unobserve(o.target))})},{threshold:.15,rootMargin:"0px 0px -4% 0px"});p.forEach(n=>t.observe(n))}else p.forEach(t=>t.classList.add("in-view"));let B=Array.from(document.querySelectorAll(".accordion-trigger"));function V(t,n){n.hidden=!1,n.classList.add("open"),n.style.maxHeight=n.scrollHeight+"px",t.setAttribute("aria-expanded","true")}function $(t,n){n.style.maxHeight=n.scrollHeight+"px",n.offsetHeight,n.style.maxHeight="0px",n.classList.remove("open");let i=o=>{o.propertyName==="max-height"&&(n.hidden=!0,n.removeEventListener("transitionend",i))};n.addEventListener("transitionend",i),t.setAttribute("aria-expanded","false")}B.forEach(t=>{let n=t.getAttribute("aria-controls"),i=document.getElementById(n);i&&(t.setAttribute("aria-expanded",i.classList.contains("open")?"true":"false"),t.addEventListener("click",()=>{t.getAttribute("aria-expanded")==="true"?$(t,i):V(t,i)}))}),window.addEventListener("resize",()=>{document.querySelectorAll(".accordion-panel.open").forEach(t=>{t.style.maxHeight=t.scrollHeight+"px"})});let I=document.getElementById("contactForm");if(I){let s=function(e,d){e.classList.add("error");let w=e.closest("div").querySelector(".error-msg");w&&(w.textContent=d||"")},h=function(e){e.classList.remove("error");let d=e.closest("div").querySelector(".error-msg");d&&(d.textContent="")},C=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},t=I.querySelector("#name"),n=I.querySelector("#email"),i=I.querySelector("#service"),o=I.querySelector("#message"),l=document.getElementById("formStatus"),g=(new URLSearchParams(window.location.search).get("service")||"").toLowerCase();g&&new Set(["drone-media","gis-mapping","other"]).has(g)&&(i.value=g),[t,n,i,o].forEach(e=>{e.addEventListener("blur",()=>{e===t&&!e.value.trim()?s(e,"Please enter your name."):e===t&&h(e),e===n&&!C(e.value.trim())?s(e,"Enter a valid email address."):e===n&&h(e),e===i&&!e.value?s(e,"Please choose a service."):e===i&&h(e),e===o&&!e.value.trim()?s(e,"Please tell me about your project."):e===o&&h(e)})}),I.addEventListener("submit",e=>{let d=!0;if(t.value.trim()?h(t):(s(t,"Please enter your name."),d=!1),C(n.value.trim())?h(n):(s(n,"Enter a valid email address."),d=!1),i.value?h(i):(s(i,"Please choose a service."),d=!1),o.value.trim()?h(o):(s(o,"Please tell me about your project."),d=!1),!d){e.preventDefault(),l&&(l.textContent="Please fix the highlighted fields.",l.style.color="#dc2626");return}l&&(l.textContent="Sending\u2026",l.style.color="#4b5563")})}if((function(){Array.from(document.querySelectorAll('a[href^="#"]')).forEach(i=>{i.addEventListener("click",o=>{let l=i.getAttribute("href");if(l==="#"||l.length<2)return;let f=document.querySelector(l);f&&(o.preventDefault(),f.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,"",l))})})})(),document.querySelector(".js-tabs")){let i=function(f){t.forEach(s=>{s.classList.remove("is-active"),s.setAttribute("aria-selected","false")}),n.forEach(s=>s.classList.remove("is-active"));let g=t.find(s=>s.getAttribute("data-tab-target")===f),E=document.getElementById(f);g&&(g.classList.add("is-active"),g.setAttribute("aria-selected","true")),E&&E.classList.add("is-active")},l=function(f,g){let E=document.getElementById(f),s=document.getElementById(g);if(!E||!s)return;let h=Array.from(s.querySelectorAll(".portfolio-card"));E.addEventListener("change",()=>{let C=E.value;h.forEach(e=>{let d=(e.getAttribute("data-type")||"").toLowerCase();if(C==="all"||C===d)e.style.display="",requestAnimationFrame(()=>{e.classList.remove("hidden-by-filter"),e.removeAttribute("aria-hidden")});else if(!e.classList.contains("hidden-by-filter")){e.classList.add("hidden-by-filter");let P=N=>{N.propertyName==="opacity"&&(e.style.display="none",e.setAttribute("aria-hidden","true"),e.removeEventListener("transitionend",P))};e.addEventListener("transitionend",P)}})})},t=Array.from(document.querySelectorAll(".tab-btn")),n=Array.from(document.querySelectorAll("[data-tab-panel]"));t.forEach(f=>{f.addEventListener("click",g=>{let E=f.getAttribute("data-tab-target");if(!E)return;document.getElementById(E)&&(g.preventDefault(),i(E))})});let o=t.find(f=>f.classList.contains("is-active"));o&&i(o.getAttribute("data-tab-target")),l("droneFilter","tab-drone"),l("gisFilter","tab-gis")}R(),(function(){let n=document.querySelector('[data-filter-scope="drone"]'),i=document.getElementById("droneGrid");if(n&&i){let S=function(y){r.forEach(b=>b.classList.remove("is-active")),y.classList.add("is-active")},q=function(y){a.forEach(b=>{let M=(b.getAttribute("data-type")||"").toLowerCase();if(y==="all"||y===M)b.style.display="",requestAnimationFrame(()=>{b.classList.remove("hidden-by-filter"),b.removeAttribute("aria-hidden")});else if(!b.classList.contains("hidden-by-filter")){b.classList.add("hidden-by-filter");let j=U=>{U.propertyName==="opacity"&&(b.style.display="none",b.setAttribute("aria-hidden","true"),b.removeEventListener("transitionend",j))};b.addEventListener("transitionend",j)}})},r=Array.from(n.querySelectorAll("[data-filter]")),a=Array.from(i.querySelectorAll(".media-card"));r.forEach(y=>{y.addEventListener("click",()=>{S(y),q(y.getAttribute("data-filter"))})})}let o=document.getElementById("lightbox");if(!o)return;let l=o.querySelector(".lightbox-dialog"),f=document.getElementById("lightboxMedia"),g=document.getElementById("lightboxTitle"),E=document.getElementById("lightboxDesc"),s=o.querySelector("[data-prev]"),h=o.querySelector("[data-next]"),C=o.querySelectorAll("[data-close]"),e=[],d=0,w=null,P='a[href], area[href], button:not([disabled]), input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])';function N(r){if(r.key!=="Tab")return;let a=Array.from(l.querySelectorAll(P)).filter(y=>y.offsetParent!==null||y===document.activeElement);if(!a.length){r.preventDefault(),l.focus();return}let S=a[0],q=a[a.length-1];r.shiftKey?document.activeElement===S&&(r.preventDefault(),q.focus()):document.activeElement===q&&(r.preventDefault(),S.focus())}function z(r){return/\.(mp4|webm|ogg)(\?|$)/i.test(r)}function D(r){if(f.innerHTML="",z(r)){let a=document.createElement("video");a.src=r,a.controls=!0,a.autoplay=!0,a.playsInline=!0,a.setAttribute("preload","metadata"),f.appendChild(a)}else{let a=document.createElement("img");a.src=r,a.loading="lazy",a.decoding="async",f.appendChild(a)}}function G(){let r=e.length>1;s.style.display=r?"":"none",h.style.display=r?"":"none"}function K(r,a,S,q){e=r,d=a||0,g.textContent=S||"",E.textContent=q||"",D(e[d]),G(),w=document.activeElement,o.hidden=!1,o.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>{o.classList.add("open");let y=l.querySelector("[data-close]")||l;l.setAttribute("tabindex","-1"),y.focus()}),o.addEventListener("keydown",N),document.documentElement.style.overflow="hidden"}function F(){o.classList.remove("open"),o.setAttribute("aria-hidden","true");let r=a=>{a.propertyName==="opacity"&&(o.hidden=!0,o.removeEventListener("transitionend",r))};o.addEventListener("transitionend",r),o.removeEventListener("keydown",N),document.documentElement.style.overflow="",w&&typeof w.focus=="function"&&w.focus(),w=null}function H(){e.length&&(d=(d+1)%e.length,D(e[d]))}function O(){e.length&&(d=(d-1+e.length)%e.length,D(e[d]))}document.querySelectorAll("[data-lightbox]").forEach(r=>{r.addEventListener("click",a=>{a.preventDefault();let S=(r.getAttribute("data-gallery")||"").trim();if(!S)return;let q=S.split("|").map(M=>M.trim()).filter(Boolean),y=r.getAttribute("data-title")||"",b=r.getAttribute("data-desc")||"";K(q,0,y,b)})}),h&&h.addEventListener("click",H),s&&s.addEventListener("click",O),C.forEach(r=>r.addEventListener("click",F)),o.addEventListener("click",r=>{r.target.hasAttribute("data-close")&&F()}),document.addEventListener("keydown",r=>{o.hidden||(r.key==="Escape"&&F(),r.key==="ArrowRight"&&H(),r.key==="ArrowLeft"&&O())})})()})();})();
